{"ts":1378749905414,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"class User < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :token_authenticatable, :confirmable,\n  # :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable, :omniauth_providers => [:google_oauth2]\n\n\n  ROLES = %w[user admin superadmin]\n  def role?(base_role)\n    role.present? && ROLES.index(base_role.to_s) <= ROLES.index(role)\n  end\n  \n  def self.find_for_google_oauth2(access_token, signed_in_resource=nil)\n    data = access_token.info\n    user = User.where(:email => data[\"email\"]).first\n\n    unless user\n        user = User.create(username: data[\"name\"],\n        \t\t   email: data[\"email\"],\n\t    \t\t   password: Devise.friendly_token[0,20],\n                   role: \"user\"\n\t    \t\t  )\n    end\n    user\nend\n  \nend\n"]],"start1":0,"start2":0,"length1":0,"length2":865}]],"length":865}
{"contributors":[],"silentsave":false,"ts":1378750062482,"patch":[[{"diffs":[[0,"   user\n"],[1,"    "],[0,"end\n  \n"],[1,"  \n   has_many :categories\n   has_many :transactions, :through => :categories\n"],[0,"end\n"]],"start1":846,"start2":846,"length1":19,"length2":101}]],"length":947,"saved":false}
